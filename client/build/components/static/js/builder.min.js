'use strict';!function(ig){var staticPath=ig.staticPath||'/static',contextPath=ig.contextPath||'./build',targets=document.querySelectorAll('[indigo-builder]'),componentIndex=0,packages={},templates={},libs=[],loader=function(t,e){var n=new window.XMLHttpRequest;n.open('GET',t),n.onreadystatechange=function(){n.readyState===window.XMLHttpRequest.DONE&&200===n.status&&e(n.responseText)},n.send()},init=function(t){for(var e=0;e<t.length;e++)if(!packages[t[e]])return;for(e=0;e<targets.length;e++)ig.builder(targets[e].getAttribute('indigo-builder'),targets[e])},createModel=function(t,e){return t=t||{},t.contextPath=contextPath,t.baseStaticPath=staticPath,t.opts=e||{},t.$=function(e,n){var i,r='';return e.charCodeAt(0)<91&&(e='igo'+e),templates[e]&&(n=n||{},t.opts=n||{},t.componentIndex=++componentIndex,i='<c _='+e+' tabindex="-1" class="init'+t.$get('class')+'"'+t.$get('disabled','disabled')+t.$attr('id'),r=window.ejs.render(templates[e],t),!1===n.show&&(n.parentStyle='display: none; '+(n.parentStyle||'')),r=i+t.$attr('parentStyle','style')+'>'+r+'</c>'),r},t.$get=function(e,n){return void 0!==t.opts[e]?void 0===n?' '+t.opts[e]:' '+n:''},t.$attr=function(e,n){return void 0!==t.opts[e]?void 0===n?' '+e+'="'+t.opts[e]+'"':' '+n+'="'+t.opts[e]+'"':''},t.$attrs=function(e){var n=[],i=t.opts[e];for(var r in i)n.push(r+'="'+i[r]+'"');return n.length?' '+n.join(' '):''},t.$css=function(e,n){return void 0!==t.opts[e]?void 0===n?' '+e+': '+t.opts[e]+';':' '+n+': '+t.opts[e]+';':''},t.$title=function(e){return e=e||t.opts.title,' tabindex="'+t.componentIndex+'"'+(e?' title="'+e+'"':'')},t.$label=function(e){return e=e||t.opts.title,' tabindex="'+t.componentIndex+'"'+(e?' aria-label="'+e+'"':'')},t.$assign=function(t,e){return e=e||t,createModel(e,t)},t.$finalize=function(){return arguments.length?'<input igo-main type="hidden" value="'+[].slice.call(arguments).join()+'"/>':''},t};ig.package=function(t,e){if(packages[t])return e();loader('./build/'+t+'Components.html',function(n){for(var i=n.split(/<<\[\[(.*)\]\]>>/),r=1;r<i.length;r+=2)libs.push(i[r]),templates[i[r].replace('!','')]=i[r+1];packages[t]=!0,init(pkgs),e(t)})},ig.builder=function(contentPath,parent){var model=createModel();loader(contentPath,function(data){var html=window.ejs.render(data,model);parent.innerHTML=html;var script=document.createElement('script');script.src=ig.DEBUG?'js/loader.js':contextPath+'/static/js/loader.min.js',!1===ig.DEBUG&&script.setAttribute('uri',contextPath),script.setAttribute('rel','igocore'),script.setAttribute('libs',libs.join(',')),parent.appendChild(script);for(var scripts=parent.querySelectorAll('script'),i=0;i<scripts.length;i++)try{script=scripts[i],-1===(script.type||'').indexOf('template')&&eval(script.innerHTML)}catch(t){window.console.error(t,script.innerHTML)}parent.dispatchEvent(new window.Event('CONTENT_LOADED'))})};var script=document.querySelector('[indigo-pkgs]'),pkgs=script?script.getAttribute('indigo-pkgs').split(','):[];pkgs.forEach(function(t){templates[t]?init(pkgs):ig.package(t,function(){})})}(window.top.indigoJS=window.top.indigoJS||{});
//# sourceMappingURL=builder.min.map